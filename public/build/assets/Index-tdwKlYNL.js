import{r as i,W as E,j as e,Y as S,a as j,b as y}from"./app-CWwNjyRo.js";import{A}from"./AdminAuthenticated-DtqGwKhf.js";import{P as g}from"./PermissionAllow-C3A1mbW_.js";import{Q as B,B as $}from"./ToastNotification-DVTlvNmY.js";import"./sweetalert2.all-cYVSKHeP.js";import{D as T,C as k,P as L}from"./react-beautiful-dnd.esm-BZBM1yt7.js";import{P as M}from"./Pagination-CPnPV0zc.js";import"./Dropdown-DLpSbRl5.js";import"./AdminSidebar-BT6o6hm5.js";import"./listen-C0qVaH3g.js";import"./useWindow-DDjtQT4k.js";import"./Anchor-DULce0Zn.js";import"./extends-CCbyfPlC.js";import"./objectWithoutPropertiesLoose-DXrfETLX.js";import"./index--NefbXuk.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./objectSpread2-Cb9oE9w6.js";import"./defineProperty-D_iN_pGO.js";import"./hoist-non-react-statics.cjs-DPd08wUI.js";import"./tiny-invariant.esm-CCoILDQG.js";import"./interopRequireDefault-BbjLfwJi.js";import"./emotion-react.browser.esm-CISCE15D.js";import"./extends-Ba-yMveS.js";import"./TransitionGroupContext-DfGQjX9E.js";function pe({categoryList:n,auth:u}){const[o,b]=i.useState(1),[N,Q]=i.useState(""),[f,x]=i.useState(n.data),{data:R,setData:P,post:_,errors:H,reset:W}=E({orderedIds:[]}),v=(t,s)=>{b(s),window.scrollTo(0,0)};i.useEffect(()=>{x(n.data)},[n]);const l=N.length>0?f:n.data,C=(o-1)*20,I=o*20,c=l.slice(C,I);i.useEffect(()=>{p(c)},[c]);const[h,p]=i.useState(c),w=async t=>{if(!t.destination)return;const s=Array.from(h),[m]=s.splice(t.source.index,1);s.splice(t.destination.index,0,m);const a=s.map((r,D)=>({...r,position:D+1}));p(a),x(a);const d=a.map(r=>r.id);P("orderedIds",d);try{const r=await y.post(route("admin.business-category.position-update"),{orderedIds:d});$.success(r.data,{position:"top-right",autoClose:5e3,closeOnClick:!0})}catch(r){console.error("Error posting data:",r)}};return e.jsxs(A,{user:u.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Business Categories"}),children:[e.jsx(S,{title:"Business Category List"}),e.jsx(B,{position:"top-right",autoClose:1e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,draggable:!1}),e.jsx("div",{className:"content-wrapper me-4",children:e.jsxs("div",{className:"container-full",children:[e.jsx("div",{className:"content-header",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("h4",{className:"page-title",children:"Business Categories"}),e.jsx("div",{className:"d-inline-block align-items-center mt-2",children:e.jsx("nav",{children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsxs(j,{href:route("admin.index"),children:[e.jsx("i",{className:"bi bi-house"})," Dashboard"]})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Business Categories"})]})})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"text-end"})})]})}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"box",children:e.jsx("div",{className:"box-body",children:e.jsxs(g,{permission:"Categories Listing",message:"true",children:[e.jsx("div",{className:"table-responsive rounded card-table",children:e.jsx(T,{onDragEnd:w,children:e.jsx(k,{droppableId:"categories",children:t=>e.jsxs("table",{className:"table border-no",id:"example1",...t.droppableProps,ref:t.innerRef,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Name"}),e.jsx("th",{className:"text-center",children:"Status"}),e.jsx("th",{className:"text-center",children:"Last Modified"}),e.jsx("th",{})]})}),e.jsxs("tbody",{children:[h.map((s,m)=>e.jsx(L,{draggableId:`${s.id}-${s.name}`,index:m,children:(a,d)=>e.jsxs("tr",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:` ${d.isDragging?"dragging":""}`,children:[e.jsx("td",{children:e.jsx("i",{className:"bi bi-arrows-move me-3 fw-bold"})}),e.jsx("td",{children:s.name}),e.jsx("td",{className:"text-center",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:window.statusIcon(s.status)}})}),e.jsx("td",{className:"text-center",children:window.formatDateTime(s.updated_at)}),e.jsx("td",{align:"right",children:e.jsx(g,{permission:"Category Edit",children:e.jsx(j,{className:"btn btn-transparent",href:route("admin.business-category.edit",s.id),children:e.jsx("i",{className:"bi bi-pencil"})})})})]})},`${s.id}-${s.name}`)),t.placeholder]})]})})})}),l.length>20&&e.jsx("div",{className:"pagination-container float-end py-5",children:e.jsx(M,{count:Math.ceil(l.length/20),page:o,onChange:v})})]})})})})})})]})})]})}export{pe as default};
