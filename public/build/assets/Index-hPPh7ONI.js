import{r as t,W as I,j as e,Y as k,S as C,b as D}from"./app-DvZEQs7q.js";import"./Dropdown-BatJtg61.js";import"./index-DeYRaHSg.js";import{P as m}from"./PermissionAllow-DjiL2LeK.js";import F from"./Wrapper-u-ya9U7-.js";import"./index-NlZy6jqC.js";/* empty css                                  */import"./server.browser-B_EaCpeU.js";import{M as r}from"./Modal-DMucxtN7.js";import P from"./Invoice-ChrzXdkR.js";import"./SideBar-ipRbBip6.js";import"./ProfileDropdown-1F0lxis-.js";import"./Header-CO9F17jM.js";import"./Dropdown-CuQS9aha.js";import"./listen-B73106F4.js";import"./useWindow-DCw2ZySZ.js";import"./Anchor-CDa32GWz.js";import"./extends-CCbyfPlC.js";import"./objectWithoutPropertiesLoose-DXrfETLX.js";import"./ToastNotification-Yj8jc6-v.js";import"./ReactToastify-uiHPkRGu.js";import"./interopRequireDefault-BbjLfwJi.js";import"./extends-CJoT7KlQ.js";import"./defineProperty-C77ibxUe.js";import"./setPrototypeOf-DgZC2w_0.js";import"./index-BHIby_lu.js";import"./BootstrapModalManager-DtfyV_Y4.js";import"./Fade-nrbR4rxK.js";import"./inheritsLoose-1HkgTRWY.js";function le({auth:h,invoices:x,current_invoice:i,newInvoice:a}){const[n,p]=t.useState(x.data),{data:l,setData:j}=I({q:""}),u=async()=>{o(!0);const s=await D.get(route("seller.invoices.search",l));p(s.data),o(!1)},[b,o]=t.useState(!1),[v,c]=t.useState(!1),[g,f]=t.useState(null),[N,y]=t.useState("Invoice"),w=()=>c(!1),d=async s=>{f(s),y("Invoice #"+s.invoice_no),c(!0)};t.useEffect(()=>{a&&(console.log("newInvoice detected:",a),d(a))},[a]);const S=()=>{window.print()};return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Invoices"}),e.jsx(m,{permission:"Invoice View",children:e.jsxs(r,{size:"lg",show:v,onHide:w,centered:!0,children:[e.jsx(r.Header,{closeButton:!0,children:e.jsx(r.Title,{children:N})}),e.jsx(r.Body,{children:e.jsx(P,{invoice:g})}),e.jsx(r.Footer,{children:e.jsx("button",{onClick:S,className:"btn btn-primary btn-sm text-overflow",children:"Print invoice"})})]})}),e.jsxs(F,{user:h.user,children:[e.jsx("main",{className:"py-6",children:e.jsx("div",{className:"container-fluid px-3 px-lg-6",children:e.jsxs("div",{className:"vstack gap-6 m-auto",children:[e.jsx("div",{className:"text-xl font-bold",children:"Invoices"}),e.jsx("div",{children:"View and manage your invoices easily. See your subscription details, track your billing history, and download invoices for record-keeping."}),e.jsxs("div",{children:[i&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"alert alert-success mb-5",children:["You currently have active subscription ",e.jsx("strong",{children:i.name})," with remaining ",e.jsx("strong",{children:i.remaining_ads})," ads till ",e.jsx("strong",{children:i.expire_date})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header border-bottom",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"me-2",children:e.jsx("input",{defaultValue:l.q,onChange:s=>j("q",s.target.value),type:"search",placeholder:"Search by name",className:"text-overflow form-control"})}),e.jsx("div",{className:"ms-2",children:e.jsx("button",{onClick:s=>u(),type:"button",className:"btn btn-neutral me-2",children:e.jsx("i",{className:"bi bi-search"})})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-nowrap",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Invoice"}),e.jsx("th",{scope:"col",children:"Plan"}),e.jsx("th",{scope:"col",children:"Date purchased"}),e.jsx("th",{scope:"col",children:"Expires at"}),e.jsx("th",{scope:"col",children:"Amount"}),e.jsx("th",{scope:"col"})]})}),e.jsx("tbody",{children:n.length?e.jsx(e.Fragment,{children:n.map(s=>e.jsxs("tr",{onClick:q=>d(s),children:[e.jsxs("td",{children:["#",s.invoice_no]}),e.jsxs("td",{children:[e.jsx("div",{children:s.name}),e.jsxs("div",{className:"small",children:["$",s.price," ",e.jsxs("small",{children:["/ ",s.duration," month"]})]})]}),e.jsx("td",{children:e.jsx("div",{children:s.invoice_date})}),e.jsx("td",{children:e.jsx("div",{children:s.expire_date})}),e.jsx("td",{children:e.jsxs("div",{children:["$",s.total_amount]})}),e.jsx("td",{children:e.jsx(m,{permission:"Invoice View",children:e.jsx("button",{type:"button",className:"btn btn-sm btn-square btn-neutral text-danger-hover me-2",children:e.jsx("i",{className:"bi bi-search"})})})})]},s.id))}):e.jsx(e.Fragment,{children:e.jsx("tr",{children:e.jsx("td",{className:"text-center",colSpan:"100",children:"No records found.."})})})})]})})]})]})]})})}),b&&e.jsx(C,{})]})]})}export{le as default};
